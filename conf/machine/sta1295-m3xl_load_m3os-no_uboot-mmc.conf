#@TYPE: Machine
#@NAME: Accordo5 STA1295 EVB board
#@DESCRIPTION: Machine configuration for Accordo5 STA1295 EVB board with **MMC** memory, with support boot M3 OS from M3 Xloader and no uboot (ATF direct Linux boot)
#@NEEDED_BSPLAYERS: meta-toolchain-bare-metal

include conf/machine/include/sta1295-base.inc

IMAGE_FSTYPES ?= "ext4"

#Override the default fitImage, as uboot is not present
KERNEL_IMAGETYPE = "zImage"
KERNEL_CLASSES_remove = "kernel-fitimage"

MEMORY_BOOT_DEVICE = "MMC"

## FLASHLOADER ##
UBOOT_ENV_CONFIG ?= "${LAYER_PATH}/conf/machine/sta1295-uboot-env-mmc.txt"
FLASHLOADER_CONFIG ?= "${LAYER_PATH}/conf/flashloader/config_mmc_m3os_load_m3xl_no_uboot_car_radio.txt"
SPLASH_CONFIG ?= "${LAYER_PATH}/binary/splash_wvga_rgb565.rgb"
SPLASH_ANIMATION_CONFIG ?= "${LAYER_PATH}/binary/splash_animation.mov"

## MEMORY MAPPING ##
MEMORY_MAPPING_CONFIG ?= "${LAYER_PATH}/conf/mapping/sta1295-evb-boot_m3os_from_m3xl-mem-mapping_512M.xml"

MACHINE_FEATURES += "atf boot_m3os_from_m3xl no_uboot"
